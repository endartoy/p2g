<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>.rndm</title>
    <link rel="icon" href="public/img/logo_p2g.png" type="image/png">

    <!-- fire base -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <!-- Include the correct UMD version of jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Include the UMD version of the autoTable plugin -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>


    <!-- alpine js &  -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.1/dist/cdn.min.js"></script>

    <!-- bulma css & font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

    <!-- custom css -->
    <style>
        html, body {
            height: 100%;
        }
        .full-height-container {
            min-height: 100vh; /* 100vh ensures the container takes at least the full height of the viewport */
        }
        .navbar-item.is-active {
            background-color: hsl(171, 100%, 41%, 0.2) !important;
        }

        .is-sticky-top {
            position: sticky;
            top: 0;
            z-index: 39;
        }

        /* Alert & Loading */
        .is-sticky-bottom {
            position: sticky;
            bottom: 0;
            z-index: 41;
        }

        .modal-card-body.foot {
            border-bottom-left-radius: 6px !important;
            border-bottom-right-radius: 6px !important;
        }
        /* .modal-card {
            width: 100%;
            height: 100%;
            max-height: 100% !important;
        } */
    </style>
</head>

<body class="container" x-data="appInstance">
    <!-- navbar -->
    <div class="p-2 has-background-white" >
        <div class="columns is-mobile is-multiline is-centered">
            <div class="column is-full">
                
                <nav class="navbar has-background-success-light" role="navigation" aria-label="main navigation" style="z-index: 39;"
                x-data="{ isActive: false }" >
                    <div class="navbar-brand is-flex is-align-items-center">
                        <a class="navbar-item" href="#">
                            <!-- <img src="public/img/logo_p2g.png" alt="Logo"> -->
                        </a>

                        <span class="is-hidden-desktop">
                            <p class="is-italic has-text-weight-semibold is-uppercase" x-text="$store.page"> DAFTAR HADIR </p>
                        </span>

                        <a role="button" class="navbar-burger" :class="{ 'is-active': isActive }" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample" @click="isActive = !isActive" @click.outside="isActive = false" >
                            <span aria-hidden="true"></span>
                            <span aria-hidden="true"></span>
                            <span aria-hidden="true"></span>
                        </a>
                    </div>

                    <div class="navbar-menu" :class="{ 'is-active': isActive }" x-transition >
                        <div class="navbar-start">
                            <a class="navbar-item has-text-weight-semibold is-uppercase" :class="{'is-active' : $store.page === 'pendaftaran'}" @click="switchPage('pendaftaran')" > PENDAFTARAN </a>
                            <a class="navbar-item has-text-weight-semibold is-uppercase" :class="{'is-active' : $store.page === 'daftar hadir'}" @click="switchPage('daftar hadir')" > DAFTAR HADIR </a>
                            <a class="navbar-item has-text-weight-semibold is-uppercase" :class="{'is-active' : $store.page === 'data pemilih'}" @click="switchPage('data pemilih')" > DATA PEMILIH </a>


                            <!-- <a class="navbar-item has-text-weight-semibold is-uppercase" :class="{'is-active' : $store.page === 'arisan'}" @click="switchPage('arisan')" > ARISAN </a> -->
                            <!-- <a class="navbar-item has-text-weight-semibold is-uppercase" :class="{'is-active' : $store.page === 'tes app'}" @click="switchPage('tes app')" > TES APP </a> -->
                        </div>
                    </div>
                </nav>

            </div>
        </div>
    </div>

    <!-- Pendaftaran -->
    <template x-if="$store.page === 'pendaftaran'" >
        <div x-data="pendaftaran()" x-show="$store.page === 'pendaftaran' " x-transition >
            <div class="p-2 mb-2 is-sticky-top has-background-white py-1 ">
                <div class="columns is-mobile is-centered">
                    <div class="column">
                        <!-- <h1 class="is-size-4 has-text-weight-semibold"> /// </h1> -->
                    </div>
                    <div class="column is-narrow">
                        <div class="field has-addons is-justify-content-end">
                            <!-- <p class="control">
                                <button class="button is-success" @click="printPDF()" >
                                    <span class="icon"><i class="fas fa-print"></i></span>
                                </button>
                            </p> -->
                            <p class="control">
                                <button class="button is-link" @click="openForm('form')" >
                                    <span class="icon"><i class="fas fa-plus"></i></span>
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <main class="p-2 full-height-container">
                <div class="columns is-multiline is-mobile">
                    <div class="column is-full">

                        <template x-if="dataPrioritas.length > 0">
                            <div class="table-container">
                                <p class="is-uppercase is-size-5 mb-3 has-text-weight-semibold" > PRIORITAS </p>
                                
                                <table class="table is-narrow is-hoverable is-bordered is-fullwidth mb-0">
                                    <thead class="has-background-danger-light">
                                        <tr class="has-text-centered">
                                            <th style="width: 60px;">No.Urut</th>
                                            <th>Nama</th>
                                            <th style="width: 20px;">JK</th>
                                            <th>Alamat</th>
                                        </tr>
                                    </thead>

                                    <template x-for="data in dataPrioritas">
                                        <tbody>
                                            <tr @click="openForm('formAksi', data);">
                                                <td>
                                                    <span x-text="data.tipe"></span> 
                                                    <span x-text="data.no_urut"></span>
                                                </td>
                                                <td x-text="data.nama"></td>
                                                <td class="has-text-centered" x-text="data.jk"></td>
                                                <td x-text="data.alamat"></td>
                                            </tr>
                                        </tbody>
                                    </template>
                                </table>
                            </div>
                        </template>

                        <template x-if="dataReguler.length > 0">
                            <div class="table-container">
                                <table class="table is-narrow is-hoverable is-bordered is-fullwidth mb-0">
                                    <thead class="has-background-success-light">
                                        <tr class="has-text-centered">
                                            <th style="width: 60px;">No.Urut</th>
                                            <th>Nama</th>
                                            <th style="width: 20px;">JK</th>
                                            <th>Alamat</th>
                                        </tr>
                                    </thead>

                                    <template x-for="data in dataReguler">
                                        <tbody>
                                            <tr @click="openForm('formAksi', data);" >
                                                <td>
                                                    <span x-text="data.tipe"></span> 
                                                    <span x-text="data.no_urut"></span>
                                                </td>
                                                <td x-text="data.nama"></td>
                                                <td class="has-text-centered" x-text="data.jk"></td>
                                                <td x-text="data.alamat"></td>
                                            </tr>
                                        </tbody>
                                    </template>
                                </table>
                            </div>
                        </template>

                        <template x-if="dataPrioritas.length <= 0 && dataReguler.length <= 0">
                            <p class="is-uppercase is-size-5 mb-3 has-text-weight-semibold has-text-centered" > Tidak ada data </p>
                        </template>

                    </div>
                </div>

            </main>

            <!-- form tambah daftar hadir -->
            <div class="modal is-active p-0 m-0" style="display: none;" 
            x-show="form" >
                <div class="modal-background"></div>
                <div class="modal-card m-0" x-show="form" x-transition style="height: 100%;">
                    <header class="modal-card-head has-background-primary p-3">
                        <p class="modal-card-title has-text-weight-semibold is-size-5"><span> TAMBAH DATA </span></p>
                        <button class="delete button is-danger" aria-label="close" @click="resetForm()"></button>
                    </header>
                    <section class="modal-card-body foot has-background-primary-light p-2">
                        <!-- form -->
                        <div class="columns is-mobile is-multiline m-0" >
                            <div class="column is-full">
                                <!-- <div class="field ">
                                    <label class="label">Pemasukan / Pengeluaran</label>
                                    <div class="control is-expanded">
                                        <div class="select is-fullwidth" >
                                            <select x-model="newSearch.tipe">
                                                <option value="DPT">DPT</option>
                                                <option value="DPTB">DPTB</option>
                                                <option value="DPK">DPK</option>
                                            </select>
                                        </div>
                                    </div>
                                </div> -->

                                <div class="field has-addons">
                                    <div class="control is-expanded">
                                        <input class="input" type="text" placeholder="Nama / No.Urut"
                                        x-model="newSearch.query" >
                                    </div>
                                  </div>
                            </div>

                            <div class="column is-full">
                                <p x-show="belumDaftar.length > 0" class="has-text-black has-text-centered is-uppercase is-size-5 mb-3 has-text-weight-semibold" > Daftar Pemilih </p>

                                <!-- list -->
                                <template x-if="belumDaftar.length > 0">
                                    <template x-for="item in belumDaftar" :key="item.id">
                                        <table class="table is-narrow is-bordered is-fullwidth mb-1">
                                            <tbody>
                                                <tr>
                                                    <th rowspan="5" style="vertical-align: middle; width: 80px;">
                                                        <span x-text="item.tipe"></span> 
                                                        <span x-text="item.no_urut"></span>
                                                    </th>
                                                    <td x-text="item.nama"></td>
                                                </tr>
                                                <tr>
                                                    <td x-text="item.nik"></td>
                                                </tr>
                                                <tr>
                                                    <td x-text="item.alamat"></td>
                                                </tr>
                                                <tr>
                                                    <td><span x-text="item.umur"></span> Th</td>
                                                </tr>
                                                <tr>
                                                    <td class="has-text-right">
                                                        <div class="is-flex is-justify-content-space-between">
                                                            <label class="checkbox is-align-content-center">
                                                                <input type="checkbox" x-model="item._prioritas" @click="item._prioritas = !item._prioritas" />
                                                                Prioritas
                                                            </label>
    
                                                            <button class="button is-small is-rounded is-success py-4 has-text-black"
                                                            @click="tambahDaftar(item)" ><i class="fas fa-plus"></i></button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </template>
                                </template>

                                <p x-show="belumDaftar.length <= 0" class="has-text-black has-text-centered is-uppercase is-size-5" > Tidak ada data </p>
                            </div>
                        </div>
                    </section>
                    <!-- <footer class="modal-card-foot has-background-primary">            
                    </footer> -->
                </div>
            </div>

            <!-- form -->
            <div class="modal is-active p-0 m-0" style="display: none" 
            x-show="formAksi" >
                <div class="modal-background"></div>
                <div class="modal-card m-0" x-show="formAksi" x-transition>
                    <header class="modal-card-head has-background-info-light p-3">
                        <p class="modal-card-title has-text-weight-semibold"><span> Detail </span></p>
                        <button class="delete button is-danger" aria-label="close" @click="resetForm('formAksi')"></button>
                    </header>
                    <section class="modal-card-body has-background-info-light p-2">
                        <!-- form -->
                        <template x-if="dataSelect">
                            <table class="table is-narrow is-bordered is-fullwidth mb-0">
                                <tbody>
                                    <tr>
                                        <td style="width: 60px;">
                                            <span>No</span>
                                        </td>
                                        <td>
                                            <span x-text="dataSelect.tipe"></span> 
                                            <span x-text="dataSelect.no_urut"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span>Nama</span>
                                        </td>
                                        <td>
                                            <span x-text="dataSelect.nama"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span>NIK</span>
                                        </td>
                                        <td>
                                            <span x-text="dataSelect.nik"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span>JK</span>
                                        </td>
                                        <td>
                                            <span x-text="dataSelect.jk"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span>Alamat</span>
                                        </td>
                                        <td>
                                            <span x-text="dataSelect.alamat"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span>Umur</span>
                                        </td>
                                        <td>
                                            <span x-text="dataSelect.umur"></span> Th
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </template>
                    </section>
                    <footer class="modal-card-foot has-background-info-light is-justify-content-space-between p-2">
                        <button class="button is-danger has-text-black" @click="hapusDaftar()" >
                            <span class="icon is-small">
                                <i class="fas fa-trash-alt"></i>
                            </span>
                        </button>
                        <button class="button is-primary has-text-black" @click="panggil()" ><strong>PANGGIL</strong></button>
                    </footer>
                </div>
            </div>
        
        </div>
    </template>

    <!-- Daftar Hadir -->
    <template x-if="$store.page === 'daftar hadir' ">
        <div x-data="_daftarHadir()" x-show="$store.page === 'daftar hadir' " x-transition >
            <div class="p-2 mb-2 is-sticky-top has-background-white py-1">
                <div class="columns is-mobile is-centered">
                    <div class="column">
                        <div class="field has-addons">
                            <div class="control">
                                <input class="input" type="text" placeholder="Cari Berdasarkan Nama"
                                x-model="filterNama" >
                            </div>
                            <!-- <div class="control">
                                <button class="button is-success is-info" @click="cariData()" >
                                    <i class="fas fa-search"></i>
                                </button>
                            </div> -->
                        </div>
                    </div>
                    <div class="column is-narrow">
                        <div class="field has-addons is-justify-content-end">
                            <div class="field ">
                                <div class="control is-expanded">
                                    <div class="select is-fullwidth" >
                                        <select x-model="filterTipe" required>
                                            <option value="DPT">DPT</option>
                                            <option value="DPTB">DPTB</option>
                                            <option value="DPK">DPK</option>
                                            <option value="SEMUA">SEMUA</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <p class="control">
                                <button class="button is-link" @click="printPDF()" >
                                    <span class="icon"><i class="fas fa-print"></i></span>
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <main class="p-2 full-height-container">
                <div class="columns is-multiline is-mobile">
                    <div class="column is-full">
                        <p x-show="filterNama !== ''" class="has-text-black has-text-centered is-uppercase is-size-5 mb-5 has-text-weight-semibold" > Hasil pencarian </p>

                        <template x-if="daftarHadir.length > 0 && filterNama === ''">
                            <table class="table is-narrow is-bordered is-fullwidth has-text-centered" id="tableInfo" >
                                <thead>
                                    <tr class="has-background-danger-light has-text-weight-semibold has-text-right">
                                        <td style="width: 20px;"></td>
                                        <td>DPT</td>
                                        <td>DPTB</td>
                                        <td>DPK</td>
                                        <td>TOTAL</td>
                                    </tr>
                                </thead>
                                
                                <tbody class="has-text-right">
                                    <tr>
                                        <td class="has-text-left has-text-weight-semibold" >LAKI - LAKI</td>
                                        <td x-text="daftarHadirDPT.filter(i => i.jk === 'L').length">DPT</td>
                                        <td x-text="daftarHadirDPTB.filter(i => i.jk === 'L').length">DPTB</td>
                                        <td x-text="daftarHadirDPK.filter(i => i.jk === 'L').length">DPK</td>
                                        <td x-text="daftarHadir.filter(i => i.jk === 'L').length">SEMUA</td>
                                    </tr>
                                    <tr>
                                        <td class="has-text-left has-text-weight-semibold" >PEREMPUAN</td>
                                        <td x-text="daftarHadirDPT.filter(i => i.jk === 'P').length">DPT</td>
                                        <td x-text="daftarHadirDPTB.filter(i => i.jk === 'P').length">DPTB</td>
                                        <td x-text="daftarHadirDPK.filter(i => i.jk === 'P').length">DPK</td>
                                        <td x-text="daftarHadir.filter(i => i.jk === 'P').length">SEMUA</td>
                                    </tr>
                                    <tr class="has-text-weight-semibold">
                                        <td class="has-text-left" >TOTAL</td>
                                        <td x-text="daftarHadirDPT.length">DPT</td>
                                        <td x-text="daftarHadirDPTB.length">DPTB</td>
                                        <td x-text="daftarHadirDPK.length">DPK</td>
                                        <td x-text="daftarHadir.length">SEMUA</td>
                                    </tr>
                                </tbody>
                            </table>
                        </template>
                        
                        <!-- data DPT -->
                        <template x-if="daftarHadirDPT.length > 0 && (filterTipe === 'DPT' || filterTipe === 'SEMUA') ">
                            <div class="table-container">
                                <p class="is-uppercase is-size-6 mb-3 has-text-weight-semibold" > DPT (Daftar Pemilih Tetap)</p>

                                <table class="table is-narrow is-hoverable is-bordered is-fullwidth mb-0">
                                    <thead class="has-background-success-light">
                                        <tr class="has-text-centered">
                                            <th style="width: 20px;" class="has-background-danger-light">#</th>
                                            <th style="width: 50px;">No.Urut</th>
                                            <th>Nama</th>
                                            <th style="width: 20px;">JK</th>
                                            <th>Alamat</th>
                                            <!-- <th></th> -->
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <template x-for="(data, index) in daftarHadirDPT" :key="data.id">
                                            <tr @click="aksi(data);">
                                                <td class="has-text-centered has-background-danger-light">
                                                    <span>
                                                        <span x-text="index+1"></span> 
                                                    </span>
                                                </td>
                                                <td>
                                                    <span x-text="data.tipe"></span> 
                                                    <span x-text="data.no_urut"></span>
                                                </td>
                                                <td>
                                                    <span x-text="data.nama"></span>
                                                </td>
                                                <td class="has-text-centered">
                                                    <span x-text="data.jk"></span>
                                                </td>
                                                <td>
                                                    <span x-text="data.alamat"></span>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </template>

                        <!-- data DPTB -->
                        <template x-if="daftarHadirDPTB.length > 0 && (filterTipe === 'DPTB' || filterTipe === 'SEMUA') ">
                            <div class="table-container">
                                <p class="is-uppercase is-size-6 mb-3 has-text-weight-semibold" > DPTb (Daftar Pemilih Tambahan) </p>

                                <table class="table is-narrow is-hoverable is-bordered is-fullwidth mb-0">
                                    <thead class="has-background-success-light">
                                        <tr class="has-text-centered">
                                            <th style="width: 20px;" class="has-background-danger-light">#</th>
                                            <th style="width: 50px;">No.Urut</th>
                                            <th>Nama</th>
                                            <th style="width: 20px;">JK</th>
                                            <th>Alamat</th>
                                            <!-- <th></th> -->
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <template x-for="(data, index) in daftarHadirDPTB" :key="data.id">
                                            <tr @click="aksi(data);">
                                                <td class="has-text-centered has-background-danger-light">
                                                    <span>
                                                        <span x-text="index+1"></span> 
                                                    </span>
                                                </td>
                                                <td>
                                                    <span x-text="data.tipe"></span> 
                                                    <span x-text="data.no_urut"></span>
                                                </td>
                                                <td>
                                                    <span x-text="data.nama"></span>
                                                </td>
                                                <td class="has-text-centered">
                                                    <span x-text="data.jk"></span>
                                                </td>
                                                <td>
                                                    <span x-text="data.alamat"></span>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </template>

                        <!-- data DPK -->
                        <template x-if="daftarHadirDPK.length > 0 && (filterTipe === 'DPK' || filterTipe === 'SEMUA') ">
                            <div class="table-container">
                                <p class="is-uppercase is-size-6 mb-3 has-text-weight-semibold" > DPK (Daftar Pemilih Khusus) </p>

                                <table class="table is-narrow is-hoverable is-bordered is-fullwidth mb-0">
                                    <thead class="has-background-success-light">
                                        <tr class="has-text-centered">
                                            <th style="width: 20px;" class="has-background-danger-light">#</th>
                                            <th style="width: 50px;">No.Urut</th>
                                            <th>Nama</th>
                                            <th style="width: 20px;">JK</th>
                                            <th>Alamat</th>
                                            <!-- <th></th> -->
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <template x-for="(data, index) in daftarHadirDPK" :key="data.id">
                                            <tr @click="aksi(data);">
                                                <td class="has-text-centered has-background-danger-light">
                                                    <span>
                                                        <span x-text="index+1"></span> 
                                                    </span>
                                                </td>
                                                <td>
                                                    <span x-text="data.tipe"></span> 
                                                    <span x-text="data.no_urut"></span>
                                                </td>
                                                <td>
                                                    <span x-text="data.nama"></span>
                                                </td>
                                                <td class="has-text-centered">
                                                    <span x-text="data.jk"></span>
                                                </td>
                                                <td>
                                                    <span x-text="data.alamat"></span>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </template>
                        
                        <!-- tidak ada data -->
                        <template x-if="daftarHadir.length <= 0">
                            <p class="has-text-black has-text-centered is-uppercase is-size-5 mb-3 has-text-weight-semibold" > Tidak ada data </p>
                        </template>


                    </div>
                </div>

            </main>

            <!-- form  -->
            <div class="modal is-active p-0 m-0" style="display: none" 
            x-show="form" >
                <div class="modal-background"></div>
                <div class="modal-card m-0" x-show="form" x-transition>
                    <header class="modal-card-head has-background-primary p-3">
                        <p class="modal-card-title has-text-weight-semibold"><span> Data Pemilih </span></p>
                        <button class="delete button is-danger" aria-label="close" @click="resetForm()"></button>
                    </header>
                    <section class="modal-card-body foot has-background-primary-light p-2">
                        <!-- form -->
                        <div class="columns is-mobile is-multiline m-0" >
                            <div class="column is-full">
                                <table class="table is-narrow is-bordered is-fullwidth mb-1">
                                    <tbody>
                                        <tr>
                                            <th rowspan="5" style="vertical-align: middle;">
                                                <span x-text="item.tipe"></span> 
                                                <span x-text="item.no_urut"></span>
                                            </th>
                                            <td x-text="item.nama"></td>
                                          </tr>
                                        <tr>
                                            <td x-text="item.nik"></td>
                                        </tr>
                                        <tr>
                                            <td x-text="item.alamat"></td>
                                        </tr>
                                        <tr>
                                            <td><span x-text="item.umur"></span> Th</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="column is-full">
                                <div class="control is-flex is-justify-content-space-between">
                                    <div>
                                        <a class="button is-danger mx-1 has-text-black" x-show="item.id" @click="deleteItem(item)">
                                            <span class="icon is-small">
                                                <i class="fas fa-trash-alt"></i>
                                            </span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- <footer class="modal-card-foot has-background-primary">            
                    </footer> -->
                </div>
            </div>

        </div>
    </template>

    <!-- Data Pemiilih -->
    <template x-if="$store.page === 'data pemilih' ">
        <div x-data="dataPemilih()" x-show="$store.page === 'data pemilih' " x-transition >
            <div class="p-2 mb-2 is-sticky-top has-background-white py-1 ">
                <div class="columns is-mobile is-centered">
                    <div class="column">
                        <div class="field has-addons">
                            <div class="control">
                                <input class="input" type="text" placeholder="Cari Berdasarkan Nama"
                                x-model="filterNama" >
                            </div>

                            <!-- <div class="control">
                                <button class="button is-success is-info" @click="cariData()" >
                                    <i class="fas fa-search"></i>
                                </button>
                            </div> -->
                        </div>
                    </div>
                    <div class="column is-narrow">
                        <div class="field has-addons is-justify-content-end">
                            <div class="field ">
                                <div class="control is-expanded">
                                    <div class="select is-fullwidth" >
                                        <select x-model="filterTipe" required>
                                            <option value="DPT">DPT</option>
                                            <option value="DPTB">DPTB</option>
                                            <option value="DPK">DPK</option>
                                            <option value="SEMUA">SEMUA</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <p class="control">
                                <button class="button is-success" @click="aksi();" >
                                    <span class="icon"><i class="fas fa-plus"></i></span>
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <main class="p-2 full-height-container">
                <div class="columns is-multiline is-mobile">
                    <div class="column is-full">
                        <p x-show="filterNama !== ''" class="has-text-black has-text-centered is-uppercase is-size-5 mb-5 has-text-weight-semibold" > Hasil pencarian </p>

                        <template x-if="dataList.length > 0 && filterNama === ''">
                            <table class="table is-narrow is-bordered is-fullwidth has-text-centered" id="tableInfo" >
                                <thead>
                                    <tr class="has-background-danger-light has-text-weight-semibold has-text-right">
                                        <td style="width: 20px;"></td>
                                        <td>DPT</td>
                                        <td>DPTB</td>
                                        <td>DPK</td>
                                        <td>TOTAL</td>
                                    </tr>
                                </thead>
                                
                                <tbody class="has-text-right">
                                    <tr>
                                        <td class="has-text-left has-text-weight-semibold" >LAKI - LAKI</td>
                                        <td x-text="dataDPT.filter(i => i.jk === 'L').length">DPT</td>
                                        <td x-text="dataDPTB.filter(i => i.jk === 'L').length">DPTB</td>
                                        <td x-text="dataDPK.filter(i => i.jk === 'L').length">DPK</td>
                                        <td x-text="dataList.filter(i => i.jk === 'L').length">SEMUA</td>
                                    </tr>
                                    <tr>
                                        <td class="has-text-left has-text-weight-semibold" >PEREMPUAN</td>
                                        <td x-text="dataDPT.filter(i => i.jk === 'P').length">DPT</td>
                                        <td x-text="dataDPTB.filter(i => i.jk === 'P').length">DPTB</td>
                                        <td x-text="dataDPK.filter(i => i.jk === 'P').length">DPK</td>
                                        <td x-text="dataList.filter(i => i.jk === 'P').length">SEMUA</td>
                                    </tr>
                                    <tr class="has-text-weight-semibold">
                                        <td class="has-text-left" >TOTAL</td>
                                        <td x-text="dataDPT.length">DPT</td>
                                        <td x-text="dataDPTB.length">DPTB</td>
                                        <td x-text="dataDPK.length">DPK</td>
                                        <td x-text="dataList.length">SEMUA</td>
                                    </tr>
                                </tbody>
                            </table>
                        </template>
                        
                        <!-- data DPT -->
                        <template x-if="dataDPT.length > 0 && (filterTipe === 'DPT' || filterTipe === 'SEMUA') ">
                            <div class="table-container">
                                <p class="is-uppercase is-size-6 mb-3 has-text-weight-semibold" > DPT (Daftar Pemilih Tetap) </p>

                                <table class="table is-narrow is-hoverable is-bordered is-fullwidth mb-0">
                                    <thead class="has-background-success-light">
                                        <tr class="has-text-centered">
                                            <th style="width: 30px;">No</th>
                                            <th>Nama</th>
                                            <th style="width: 20px;">JK</th>
                                            <th>Alamat</th>
                                            <!-- <th></th> -->
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <template x-for="(data, index) in dataDPT" :key="data.id">
                                            <tr :class="{'has-background-danger-light' : !data._panggil}" 
                                            @click="aksi(data);">
                                                <td class="has-text-centered" >
                                                    <span>
                                                        <!-- <span x-text="data.tipe"></span>  -->
                                                        <span x-text="data.no_urut"></span>
                                                    </span>
                                                </td>
                                                <td>
                                                    <span x-text="data.nama"></span>
                                                </td>
                                                <td class="has-text-centered">
                                                    <span x-text="data.jk"></span>
                                                </td>
                                                <td>
                                                    <span x-text="data.alamat"></span>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </template>

                        <!-- data DPTB -->
                        <template x-if="dataDPTB.length > 0 && (filterTipe === 'DPTB' || filterTipe === 'SEMUA') ">
                            <div class="table-container">
                                <p class="is-uppercase is-size-6 mb-3 has-text-weight-semibold" > DPTb (Daftar Pemilih Tambahan) </p>

                                <table class="table is-narrow is-hoverable is-bordered is-fullwidth mb-0">
                                    <thead class="has-background-success-light">
                                        <tr class="has-text-centered">
                                            <th style="width: 30px;">No</th>
                                            <th>Nama</th>
                                            <th style="width: 20px;">JK</th>
                                            <th>Alamat</th>
                                            <!-- <th></th> -->
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <template x-for="(data, index) in dataDPTB" :key="data.id">
                                            <tr :class="{'has-background-danger-light' : !data._panggil}"
                                            @click="aksi(data);">
                                                <td class="has-text-centered" :class="{'has-background-danger-light' : !data._panggil }">
                                                    <span>
                                                        <!-- <span x-text="data.tipe"></span>  -->
                                                        <span x-text="data.no_urut"></span>
                                                    </span>
                                                </td>
                                                <td>
                                                    <span x-text="data.nama"></span>
                                                </td>
                                                <td class="has-text-centered">
                                                    <span x-text="data.jk"></span>
                                                </td>
                                                <td>
                                                    <span x-text="data.alamat"></span>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </template>

                        <!-- data DPK -->
                        <template x-if="dataDPK.length > 0 && (filterTipe === 'DPK' || filterTipe === 'SEMUA') ">
                            <div class="table-container">
                                <p class="is-uppercase is-size-6 mb-3 has-text-weight-semibold" > DPK (Daftar Pemilih Khusus) </p>

                                <table class="table is-narrow is-hoverable is-bordered is-fullwidth mb-0">
                                    <thead class="has-background-success-light">
                                        <tr class="has-text-centered">
                                            <th style="width: 30px;">No</th>
                                            <th>Nama</th>
                                            <th style="width: 20px;">JK</th>
                                            <th>Alamat</th>
                                            <!-- <th></th> -->
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <template x-for="(data, index) in dataDPK" :key="data.id">
                                            <tr :class="{'has-background-danger-light' : !data._panggil}" 
                                            @click="aksi(data);">
                                                <td class="has-text-centered">
                                                    <span>
                                                        <!-- <span x-text="data.tipe"></span>  -->
                                                        <span x-text="data.no_urut"></span>
                                                    </span>
                                                </td>
                                                <td>
                                                    <span x-text="data.nama"></span>
                                                </td>
                                                <td class="has-text-centered">
                                                    <span x-text="data.jk"></span>
                                                </td>
                                                <td>
                                                    <span x-text="data.alamat"></span>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div>
                        </template>

                        <!-- tidak ada data -->
                        <template x-if="dataList.length <= 0">
                            <p class="has-text-black has-text-centered is-uppercase is-size-5 mb-3 has-text-weight-semibold" > Tidak ada data </p>
                        </template>


                    </div>
                </div>

            </main>

            <!-- form  -->
            <div class="modal is-active p-0 m-0" style="display: none" 
            x-show="form" >
                <div class="modal-background"></div>
                <div class="modal-card m-0" x-show="form" x-transition>
                    <header class="modal-card-head has-background-primary p-3">
                        <p class="modal-card-title has-text-weight-semibold"><span> Data Pemilih </span></p>
                        <button class="delete button is-danger" aria-label="close" @click="resetForm()"></button>
                    </header>
                    <section class="modal-card-body foot has-background-primary-light p-2">
                        <!-- form -->
                        <form @submit.prevent="saveItem()" class="columns is-mobile is-multiline m-0" >
                            <div class="column is-full">
                                <div class="field ">
                                    <div class="control is-expanded">
                                        <div class="select is-fullwidth" >
                                            <select x-model="item.tipe" :change="count_no_urut()" :disabled="item.id !== '' " required>
                                                <option value="DPT">DPT</option>
                                                <option value="DPTB">DPTB</option>
                                                <option value="DPK">DPK</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="field">
                                    <div class="control is-expanded">
                                        <input class="input is-uppercase" type="number" placeholder="Nomor Urut" required disabled
                                        x-model="item.no_urut" >
                                    </div>
                                </div>

                                <div class="field">
                                    <div class="control is-expanded">
                                        <input class="input is-uppercase" type="text" placeholder="Nama" required
                                        x-model="item.nama" >
                                    </div>
                                </div>

                                <div class="field">
                                    <div class="control is-expanded">
                                        <input class="input is-uppercase" type="text" placeholder="NIK" 
                                        x-model="item.nik" >
                                    </div>
                                </div>

                                <div class="field ">
                                    <div class="control is-expanded">
                                        <div class="select is-fullwidth" >
                                            <select x-model="item.jk" required>
                                                <option value="L">Laki - Laki</option>
                                                <option value="P">Perempuan</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="field">
                                    <div class="control is-expanded">
                                        <!-- <input class="input is-uppercase" type="text" placeholder="Alamat" required
                                        x-model="item.alamat" > -->

                                        <textarea class="textarea is-uppercase" placeholder="Alamat" rows="2" required
                                        x-model="item.alamat" > </textarea>
                                    </div>
                                </div>

                                <div class="field">
                                    <div class="control is-expanded">
                                        <input class="input is-uppercase" type="number" placeholder="Umur"
                                        x-model="item.umur" >
                                    </div>
                                </div>

                                <!-- <div class="field" x-data="{focused: false}" >
                                    <div class="control">
                                        <div class="dropdown is-active" style="width: 100%;"  >
                                            <div class="dropdown-trigger" style="width: 100%;">
                                                <input class="input is-uppercase" type="text" placeholder="Ketik nama untuk mencari ..." 
                                                    x-model="query.nama" 
                                                    @input="filterSuggestions()" 
                                                    @focus="focused = true" 
                                                    @blur="focused = false" >
                                            </div>

                                            <div class="dropdown-menu is-sugestion-box "
                                            :class="{'show': focused && filteredSuggestions.length > 0}" >
                                                <div class="dropdown-content">
                                                    <template x-for="suggestion in filteredSuggestions" >
                                                        <a class="dropdown-item" @click="selectSuggestion(suggestion);"> 
                                                            <span class="is-size-6">
                                                                <span class="is-uppercase" x-text="suggestion.tipe"></span> 
                                                                <span class="is-uppercase" x-text="suggestion.no"></span> 
                                                                [ <span class="is-uppercase" x-text="suggestion.nama"></span> ] 
                                                                <span x-show="suggestion.nik">[ <span class="is-uppercase" x-text="suggestion.nik"></span> ]</span> 
                                                            </span>
                                                        </a>
                                                    </template>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div> -->
                                
                            </div>

                            <div class="column is-full">
                                <div class="control is-flex is-justify-content-space-between">
                                    <div>
                                        <a class="button is-danger mx-1 has-text-black" x-show="item.id" @click="deleteItem(item)">
                                            <span class="icon is-small">
                                                <i class="fas fa-trash-alt"></i>
                                            </span>
                                        </a>
                                    </div>
                                    <div class="is-flex is-justify-content-end">
                                        <button type="submit" class="button is-primary mx-1 has-text-black" ><strong x-text="item.id ? 'UPDATE' : 'SIMPAN'" >SIMPAN</strong></button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </section>
                    <!-- <footer class="modal-card-foot has-background-primary">            
                    </footer> -->
                </div>
            </div>

        </div>
    </template>

    <!-- PROP -->
    <div class="p-2 is-sticky-bottom">
        <div class="columns is-mobile is-multiline is-centered">
            <!-- message -->
            <div class="column is-full" x-show="$store.message.class" x-transition >
                <section class="alert-message is-fullwidth" >
                    <div class="notification" :class="`${$store.message.type}`">
                        <button class="delete" @click="$store.message.class = false"></button>
                        <strong x-text="$store.message.text" > ---------------- </strong>
                    </div>
                </section>
            </div>

            <!-- loading -->
            <div class="column is-full" x-show="$store.isLoading" x-transition >
                <section class="alert-message is-fullwidth" >
                    <div class="notification has-background-grey-light" >
                        <!-- <strong> LOADING </strong> -->
                        <progress class="progress is-link" max="100"></progress>
                        <!-- <strong class="is-italic">. . Loading . .</strong> -->
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="src/pendaftaran.js"></script>
</body>

</html>
